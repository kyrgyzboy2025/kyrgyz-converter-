<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŸ¯å°”å…‹å­œè¯­è½¬æ¢å™¨</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px; margin: 0 auto; padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white; border-radius: 20px; padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { 
            color: #333; text-align: center; margin-bottom: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .direction {
            display: flex; align-items: center; justify-content: center;
            gap: 20px; margin: 20px 0;
        }
        .swap-btn {
            background: #667eea; color: white; border: none;
            width: 50px; height: 50px; border-radius: 50%;
            cursor: pointer; font-size: 20px;
            transition: transform 0.3s;
        }
        .swap-btn:hover { transform: rotate(180deg); }
        .lang-label {
            font-size: 18px; font-weight: bold; color: #555;
            padding: 10px 20px; background: #f0f0f0;
            border-radius: 10px; min-width: 150px; text-align: center;
        }
        textarea {
            width: 100%; min-height: 150px; padding: 15px;
            border: 2px solid #e0e0e0; border-radius: 10px;
            font-size: 16px; resize: vertical; margin: 10px 0;
            transition: border-color 0.3s;
        }
        textarea:focus { border-color: #667eea; outline: none; }
        .btn-group {
            display: flex; gap: 10px; margin: 20px 0;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 24px; border: none; border-radius: 8px;
            font-size: 16px; cursor: pointer; transition: all 0.3s;
            flex: 1; min-width: 120px;
        }
        .convert-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white; font-weight: bold;
        }
        .copy-btn { background: #10b981; color: white; }
        .clear-btn { background: #ef4444; color: white; }
        .history-btn { background: #f59e0b; color: white; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .result-box {
            background: #f8fafc; border-radius: 10px;
            padding: 20px; margin-top: 20px;
            border-left: 5px solid #667eea;
        }
        .history {
            margin-top: 30px; padding: 20px;
            background: #f8fafc; border-radius: 10px;
            display: none;
        }
        .history-item {
            padding: 10px; border-bottom: 1px solid #e5e7eb;
            font-family: monospace;
        }
        .arabic { font-size: 20px; text-align: right; }
        .cyrillic { font-size: 18px; }
        @media (max-width: 600px) {
            .direction { flex-direction: column; }
            .btn-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ù‚Ù‰Ø±Ø¹Ù‰Ø²Ú†Ø§â‡†ÒšÑ‹Ñ€Ò“Ñ‹Ğ·Ñ‡Ğ° </h1>
        
        <div class="direction">
            <div class="lang-label" id="from-lang">Ù‚Ù‰Ø±Ø¹Ù‰Ø²Ú†Ø§</div>
            <button class="swap-btn" onclick="swapDirection()">â‡„</button>
            <div class="lang-label" id="to-lang">ÒšÑ‹Ñ€Ò“Ñ‹Ğ·Ñ‡Ğ°</div>
        </div>
        
        <textarea id="input-text" placeholder="Ø¨Û‡Ù„ Ø¬Û•Ø±Ú¯Û• Ù‚Ù‰Ø±Ø¹Ù‰Ø²Ú†Ø§ ÙƒÙ‰Ø±Ú¯Ù‰Ø²Û•Ø³Ù‰Ø²" autofocus></textarea>
        
        <div class="btn-group">
            <button class="convert-btn" onclick="convert()">ğŸ”„ Ù‚ÙˆØªÙˆØ±Û‡Û‡</button>
            <button class="copy-btn" onclick="copyResult()">ğŸ“‹ ÙƒÛ…Ú†Û‰Ø±Û‰Û‰ Ù†Ø§ØªÙ‰ÙŠØ¬Ø§Ø³Ù‰</button>
            <button class="clear-btn" onclick="clearAll()">ğŸ—‘ï¸ ØªØ§Ø²Ø§Ù„ÙˆÙˆ</button>
            <button class="history-btn" onclick="toggleHistory()">ğŸ“œ Ù‚ÙˆØªÙˆØ±Û‡Û‡ ØªØ§Ø±Ù‰Ø­Ù‰</button>
        </div>
        
        <div class="result-box">
            <strong>è½¬æ¢ç»“æœï¼š</strong>
            <div id="output-text" style="min-height: 100px; margin-top: 10px; padding: 10px; background: white; border-radius: 5px;"></div>
        </div>
        
        <div class="history" id="history-box">
            <h3>ğŸ“œ è½¬æ¢å†å²</h3>
            <div id="history-list"></div>
        </div>
    </div>

    <script>
        // æŸ¯å°”å…‹å­œè¯­è½¬æ¢æ˜ å°„è¡¨
        const arabicToCyrillic = {
            // ç»„åˆå­—æ¯ï¼ˆå¿…é¡»å…ˆåŒ¹é…é•¿çš„ï¼‰
            'ÙŠÛ•': 'Ğ•', 'ÙŠØ§': 'Ğ¯', 'ÙŠÙˆ': 'Ğ®', 'ÙŠÛ‡': 'Ğ',
            // å•å­—æ¯
            'Ø´': 'Ğ¨', 'Ø¯': 'Ğ”', 'Ø±': 'Ğ ', 'Ø²': 'Ğ—', 'Ù‰': 'Ğ«',
            'Ø¦': 'Ğ˜', 'ÙŠ': 'Ğ™', 'Ú¯': 'Ğ“', 'Ù†': 'Ğ', 'Ù„': 'Ğ›',
            'Ù…': 'Ğœ', 'Ùˆ': 'Ğ', 'Û…': 'Ó¨', 'Û‡': 'Ğ£', 'Û‰': 'Ò®',
            'Û‹': 'Ğ’', 'Ø³': 'Ğ¡', 'Ø§': 'Ğ', 'Ø¨': 'Ğ‘', 'Ù¾': 'ĞŸ',
            'Øª': 'Ğ¢', 'Ø¬': 'Ğ–', 'Ú†': 'Ğ§', 'Ø­': 'Ğ¥', 'Ù': 'Ğ¤',
            'Ùƒ': 'Ğš', 'Ù‚': 'Òš', 'Ø¹': 'Ò’',
            // ç‰¹æ®Šå¤„ç† Û•
            'Û•': 'Ğ•'  // ç®€åŒ–ä¸ºä¸€ç§å¤„ç†ï¼Œå®é™…éœ€æ ¹æ®ä½ç½®åˆ¤æ–­
        };
        
        const cyrillicToArabic = {
            // åå‘æ˜ å°„
            'Ğ¨': 'Ø´', 'Ğ”': 'Ø¯', 'Ğ ': 'Ø±', 'Ğ—': 'Ø²', 'Ğ«': 'Ù‰',
            'Ğ˜': 'Ø¦', 'Ğ™': 'ÙŠ', 'Ğ“': 'Ú¯', 'Ğ': 'Ù†', 'Ğ›': 'Ù„',
            'Ğœ': 'Ù…', 'Ğ': 'Ùˆ', 'Ó¨': 'Û…', 'Ğ£': 'Û‡', 'Ò®': 'Û‰',
            'Ğ’': 'Û‹', 'Ğ¡': 'Ø³', 'Ğ': 'Ø§', 'Ğ‘': 'Ø¨', 'ĞŸ': 'Ù¾',
            'Ğ¢': 'Øª', 'Ğ–': 'Ø¬', 'Ğ§': 'Ú†', 'Ğ¥': 'Ø­', 'Ğ¤': 'Ù',
            'Ğš': 'Ùƒ', 'Òš': 'Ù‚', 'Ò’': 'Ø¹', 'Ğ•': 'ÙŠÛ•',
            'Ğ¯': 'ÙŠØ§', 'Ğ®': 'ÙŠÙˆ', 'Ğ': 'ÙŠÛ‡'
        };
        
        let isArabicToCyrillic = true;
        let conversionHistory = JSON.parse(localStorage.getItem('kyrgyzHistory')) || [];
        
        // åˆå§‹åŒ–æ˜¾ç¤ºå†å²
        displayHistory();
        
        function convert() {
            const input = document.getElementById('input-text').value.trim();
            if (!input) {
                alert('è¯·è¾“å…¥è¦è½¬æ¢çš„æ–‡æœ¬');
                return;
            }
            
            let output = '';
            if (isArabicToCyrillic) {
                output = convertArabicToCyrillic(input);
            } else {
                output = convertCyrillicToArabic(input);
            }
            
            document.getElementById('output-text').innerHTML = 
                `<div style="font-size: 20px; line-height: 1.6;">${output}</div>`;
            
            // ä¿å­˜åˆ°å†å²è®°å½•
            saveToHistory(input, output);
        }
        
        function convertArabicToCyrillic(text) {
            let result = '';
            let i = 0;
            
            while (i < text.length) {
                let matched = false;
                
                // ä¼˜å…ˆåŒ¹é…ç»„åˆå­—æ¯
                for (const [key, value] of Object.entries(arabicToCyrillic)) {
                    if (key.length > 1 && i + key.length <= text.length) {
                        if (text.substring(i, i + key.length) === key) {
                            result += value;
                            i += key.length;
                            matched = true;
                            break;
                        }
                    }
                }
                
                if (!matched) {
                    const char = text[i];
                    result += arabicToCyrillic[char] || char;
                    i++;
                }
            }
            
            return result;
        }
        
        function convertCyrillicToArabic(text) {
            let result = '';
            for (let char of text) {
                const upperChar = char.toUpperCase();
                result += cyrillicToArabic[upperChar] || 
                         (cyrillicToArabic[char] || char);
            }
            return result;
        }
        
        function swapDirection() {
            isArabicToCyrillic = !isArabicToCyrillic;
            
            const fromLang = document.getElementById('from-lang');
            const toLang = document.getElementById('to-lang');
            const input = document.getElementById('input-text');
            const output = document.getElementById('output-text');
            
            if (isArabicToCyrillic) {
                fromLang.textContent = 'é˜¿æ‹‰ä¼¯å­—æ¯';
                toLang.textContent = 'è¥¿é‡Œå°”å­—æ¯';
                input.placeholder = 'åœ¨æ­¤è¾“å…¥é˜¿æ‹‰ä¼¯å­—æ¯æ–‡æœ¬...';
            } else {
                fromLang.textContent = 'è¥¿é‡Œå°”å­—æ¯';
                toLang.textContent = 'é˜¿æ‹‰ä¼¯å­—æ¯';
                input.placeholder = 'åœ¨æ­¤è¾“å…¥è¥¿é‡Œå°”å­—æ¯æ–‡æœ¬...';
            }
            
            // äº¤æ¢è¾“å…¥è¾“å‡ºå†…å®¹
            const temp = input.value;
            input.value = output.textContent || '';
            output.textContent = temp || '';
        }
        
        function copyResult() {
            const output = document.getElementById('output-text').textContent;
            if (!output) {
                alert('æ²¡æœ‰å†…å®¹å¯å¤åˆ¶');
                return;
            }
            
            navigator.clipboard.writeText(output).then(() => {
                alert('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }).catch(err => {
                // å¤‡ç”¨æ–¹æ³•
                const textArea = document.createElement('textarea');
                textArea.value = output;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }
        
        function clearAll() {
            document.getElementById('input-text').value = '';
            document.getElementById('output-text').textContent = '';
        }
        
        function saveToHistory(input, output) {
            const timestamp = new Date().toLocaleString('zh-CN');
            const item = {
                id: Date.now(),
                timestamp,
                input,
                output,
                direction: isArabicToCyrillic ? 'é˜¿æ‹‰ä¼¯â†’è¥¿é‡Œå°”' : 'è¥¿é‡Œå°”â†’é˜¿æ‹‰ä¼¯'
            };
            
            conversionHistory.unshift(item); // æ·»åŠ åˆ°å¼€å¤´
            if (conversionHistory.length > 20) {
                conversionHistory = conversionHistory.slice(0, 20); // ä¿ç•™æœ€è¿‘20æ¡
            }
            
            localStorage.setItem('kyrgyzHistory', JSON.stringify(conversionHistory));
            displayHistory();
        }
        
        function displayHistory() {
            const historyList = document.getElementById('history-list');
            if (!conversionHistory.length) {
                historyList.innerHTML = '<p style="color: #666; text-align: center;">æš‚æ— å†å²è®°å½•</p>';
                return;
            }
            
            historyList.innerHTML = conversionHistory.map(item => `
                <div class="history-item">
                    <small style="color: #888;">${item.timestamp} (${item.direction})</small>
                    <div class="arabic"><strong>è¾“å…¥:</strong> ${item.input}</div>
                    <div class="cyrillic"><strong>è¾“å‡º:</strong> ${item.output}</div>
                </div>
            `).join('');
        }
        
        function toggleHistory() {
            const historyBox = document.getElementById('history-box');
            const isVisible = historyBox.style.display === 'block';
            historyBox.style.display = isVisible ? 'none' : 'block';
        }
        
        // æŒ‰Ctrl+Enterå¿«é€Ÿè½¬æ¢
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                convert();
            }
        });
    </script>
</body>
</html>
